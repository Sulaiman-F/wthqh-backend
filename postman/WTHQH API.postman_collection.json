{
	"info": {
		"_postman_id": "ea86b39f-2b4b-48d7-9eaf-5552c6ca6837",
		"name": "WTHQH API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "45925059",
		"_collection_link": "https://sulaiman-7269084.postman.co/workspace/Sulaiman's-Workspace~6bbf6a53-64d2-4846-8f0b-b30065a12cff/collection/45925059-ea86b39f-2b4b-48d7-9eaf-5552c6ca6837?action=share&source=collection_link&creator=45925059"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Signup",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const j = pm.response.json(); \r",
									"if (j.accessToken) pm.environment.set('accessToken', j.accessToken); if (j.refreshToken) pm.environment.set('refreshToken', j.refreshToken);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \r\n\"name\":\"Test\", \r\n\"email\":\"test1@example.com\", \r\n\"password\":\"Passw0rd!\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/signup",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "Signin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const j = pm.response.json(); if (j.accessToken) pm.environment.set('accessToken', j.accessToken); if (j.refreshToken) pm.environment.set('refreshToken', j.refreshToken);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \r\n\"email\":\"test1@example.com\",\r\n\"password\":\"Passw0rd!\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/signin",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"signin"
							]
						}
					},
					"response": []
				},
				{
					"name": "Me",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const code = pm.response.code; if (code === 204) { pm.environment.unset('accessToken'); pm.environment.unset('refreshToken'); }"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "Refresh",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const j=pm.response.json(); if (j.accessToken) pm.environment.set('accessToken', j.accessToken);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": " { \"refreshToken\": \"{{refreshToken}}\" } ",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"refresh"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Folders api",
			"item": [
				{
					"name": "Create root",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const j=pm.response.json(); if (j.folder?._id) pm.environment.set('folderId', j.folder._id);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"name\": \"Root4\" }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/folders",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders"
							]
						}
					},
					"response": []
				},
				{
					"name": "List roots",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"name\": \"Root\" }"
						},
						"url": {
							"raw": "{{baseUrl}}/api/folders",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create child",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"name\": \"Child2\", \"parentFolderId\": \"68ac8c20ca888b2d0400a9d3\" }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/folders",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders"
							]
						}
					},
					"response": []
				},
				{
					"name": "List children",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/folders?parent=68ac8c1cca888b2d0400a9d1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders"
							],
							"query": [
								{
									"key": "parent",
									"value": "68ac8c1cca888b2d0400a9d1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Tree",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/folders?tree=true",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders"
							],
							"query": [
								{
									"key": "tree",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Rename",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"name\": \"Renamed\" }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/folders/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "68ac8c20ca888b2d0400a9d3"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}} /api/folders/:id",
							"host": [
								"{{baseUrl}} "
							],
							"path": [
								"api",
								"folders",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "68ac8c1cca888b2d0400a9d1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "List docs in folder",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}} /api/folders/{{folderId}}/documents",
							"host": [
								"{{baseUrl}} "
							],
							"path": [
								"api",
								"folders",
								"{{folderId}}",
								"documents"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "documents",
			"item": [
				{
					"name": "Create new document",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const j = pm.response.json(); \r",
									"if (j.document && j.document._id) pm.environment.set('documentId', j.document._id);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/C:/Users/xxslo/OneDrive/Desktop/Sulaiman_Alfawzan_CV.pdf"
								},
								{
									"key": "title",
									"value": "My doc",
									"type": "text"
								},
								{
									"key": "description",
									"value": "description1",
									"type": "text"
								},
								{
									"key": "tags",
									"value": "tag1,tag2,tag3",
									"type": "text"
								},
								{
									"key": "folderId",
									"value": "{{folderId}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/documents",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents"
							]
						}
					},
					"response": []
				},
				{
					"name": "List my documents",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/documents/my?folderId={{folderId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"my"
							],
							"query": [
								{
									"key": "folderId",
									"value": "{{folderId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get one document",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/documents/{{documentId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"{{documentId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update document",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n\"title\": \"New title\",\r\n\"description\": \"Updated\",\r\n\"tags\": [\"a\",\"b\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/documents/{{documentId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"{{documentId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add a new version",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									" const j = pm.response.json();\r",
									" if (j.version && j.version._id) pm.environment.set('versionId', j.version._id);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/C:/Users/xxslo/OneDrive/Desktop/Sulaiman_Alfawzan_CV.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/documents/{{documentId}}/versions",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"{{documentId}}",
								"versions"
							]
						}
					},
					"response": []
				},
				{
					"name": "List versions",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/documents/{{documentId}}/versions",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"{{documentId}}",
								"versions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Download latest version",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/documents/{{documentId}}/download",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"{{documentId}}",
								"download"
							]
						}
					},
					"response": []
				},
				{
					"name": "Download a specific version by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/documents/versions/{{versionId}}/download",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"versions",
								"{{versionId}}",
								"download"
							]
						}
					},
					"response": []
				},
				{
					"name": "List documents within a folder",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/folders/{{folderId}}/documents",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"folders",
								"{{folderId}}",
								"documents"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Share API",
			"item": [
				{
					"name": "Create a share link",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"expiresInHours\": 24 }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/documents/{{documentId}}/share",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"documents",
								"{{documentId}}",
								"share"
							]
						}
					},
					"response": []
				},
				{
					"name": "Open the public link",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:5000/api/public/ddb76d7aa4d256d414fa320d85fb276ce9093478dc2f8b34",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "5000",
							"path": [
								"api",
								"public",
								"ddb76d7aa4d256d414fa320d85fb276ce9093478dc2f8b34"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Health",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/health",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"health"
					]
				}
			},
			"response": []
		},
		{
			"name": "Search",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/search?q=Root4",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"search"
					],
					"query": [
						{
							"key": "q",
							"value": "Root4"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "audit",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/audit?limit=50",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"audit"
					],
					"query": [
						{
							"key": "limit",
							"value": "50"
						}
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5000",
			"type": "string"
		}
	]
}